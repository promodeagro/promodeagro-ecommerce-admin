"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[687],{6687:(e,i,t)=>{t.r(i),t.d(i,{default:()=>k});var l=t(5043),r=t(4712),n=t(7880),a=t(6255),s=t(2521),o=t(8003),d=t(5336),c=t(2671),h=t(5165),u=t(4154),v=t(9971),p=t(3372),x=t(6421),m=t(8811),j=t(5416),A=t(500),g=t(3941),y=t(3003),f=t(5475),S=t(1013),b=(t(7179),t(6600)),P=t(2332),C=t(579);const w=e=>{var i;let{products:t}=e;const r=(0,y.wA)(),n=(0,y.d4)((e=>e.orders.ordersData)),{data:a=[]}=n;(0,l.useEffect)((()=>{r((0,P.Gb)())}),[r]);const[s,o]=(0,l.useState)([]),[d,c]=(0,l.useState)([]);return(0,l.useEffect)((()=>{if(t.data){const e=[],i=[];t.data.map((t=>(!0===t.active?e.push(t):!1===t.active&&i.push(t),null))),o(e),c(i)}}),[t]),(0,C.jsxs)(b.A,{columns:5,variant:"default",minColumnWidth:170,children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(x.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Total Active Products"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===s||void 0===s?void 0:s.length})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(x.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Total Stock"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:"\u20b9436K"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(x.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Total Orders"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===(i=a.items)||void 0===i?void 0:i.length})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(x.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Net Profit"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:"123K"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(x.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Inactive Products"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===d||void 0===d?void 0:d.length})]})]})},k=()=>{const e=(0,y.wA)(),i=(0,y.d4)((e=>e.products.products)),{data:t=[]}=i,[b,P]=(0,l.useState)("All"),[k,z]=(0,l.useState)([]),[D,L]=(0,l.useState)(1),[F,I]=(0,l.useState)(""),[O,T]=(0,l.useState)("All"),[E,W]=(0,l.useState)({}),[q,H]=(0,l.useState)(!1),[R,V]=(0,l.useState)(!1),[B,Q]=(0,l.useState)({}),[N,M]=(0,l.useState)(""),[_,K]=(0,l.useState)("");(0,l.useEffect)((()=>{e((0,S.j0)()),L(1)}),[e]);const G=(e,i,t)=>{var l,r;W((l=>({...l,[e]:{...l[e],[i]:t}})));const n=t,a="compareAt"===i?t:null!==(l=null===(r=E[e])||void 0===r?void 0:r.compareAt)&&void 0!==l?l:"";let s={};"onlineStorePrice"!==i||n||(s.onlineStorePrice="Required!"),"compareAt"===i&&(a?parseFloat(a)<parseFloat(n)&&(s.compareAt="CP must be greater than OSP"):s.compareAt="Required!"),Q((i=>({...i,[e]:s})))},J=t?t.filter((e=>{const i="All"===b||e.active===("Active"===b),t=e.itemCode.toLowerCase().includes(F.toLowerCase())||e.name.toLowerCase().includes(F.toLowerCase())||(e.active?"active":"inactive").includes(F.toLowerCase()),l="All"===O||e.category===O;return i&&t&&l})):[],U=20*D,X=U-20,Y=J.slice(X,U),Z=[{label:"All",value:"All"},{label:"Leafy",value:"Leafy"},{label:"Fruit",value:"Fruit"},{label:"Vegetable",value:"Vegetable"},{label:"Bengali Vegetable",value:"Bengali Vegetable"}],[$,ee]=l.useState([{type:"info",dismissible:!0,dismissLabel:"Dismiss message",onDismiss:()=>ee([]),content:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("b",{children:"Price updated successfully! "}),(0,C.jsx)("p",{children:"The new price is now live on the online store"})]}),id:"message_1"}]);return(0,C.jsxs)(r.A,{notifications:(0,C.jsx)(C.Fragment,{children:R?(0,C.jsx)(n.A,{items:$}):(0,C.jsx)(C.Fragment,{})}),breadcrumbs:(0,C.jsx)(a.A,{items:[{text:"Dashboard",href:"/app/dashboard"},{text:"Products",href:"/app/dashboard/products"}],ariaLabel:"Breadcrumbs"}),headerVariant:"high-contrast",header:(0,C.jsx)(s.A,{actions:(0,C.jsx)(o.A,{alignItems:"center",direction:"horizontal",size:"xs",children:(0,C.jsx)(d.A,{variant:"normal",children:"Export"})}),variant:"h1",children:"Products"}),children:[(0,C.jsxs)(o.A,{direction:"vertical",size:"s",children:[(0,C.jsx)(c.A,{children:(0,C.jsx)(w,{products:i})}),(0,C.jsx)("div",{children:(0,C.jsx)(h.A,{header:(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,C.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,C.jsx)("div",{style:{width:"390px"},children:(0,C.jsx)(u.A,{filteringPlaceholder:"Search",filteringText:F,onChange:e=>{I(e.detail.filteringText),L(1)}})}),(0,C.jsx)("div",{style:{width:"140px"},children:(0,C.jsx)(v.A,{options:Z,selectedOption:Z.find((e=>e.value===O)),onChange:e=>{let{detail:i}=e;T(i.selectedOption.value),L(1)},placeholder:"Select Category"})})]}),(0,C.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[R?(0,C.jsx)(d.A,{variant:"normal",onClick:()=>{window.open("https://promodeagro.com/","_blank")},children:"View Product Page"}):(0,C.jsx)(d.A,{disabled:0===k.length,variant:"normal",onClick:()=>{(()=>{let e=!0;const i={};return k.forEach((t=>{const l=E[t.id]||{},r=void 0!==l.onlineStorePrice?l.onlineStorePrice:t.onlineStorePrice,n=void 0!==l.compareAt?l.compareAt:t.compareAt;let a={};void 0!==l.onlineStorePrice&&""===r&&(e=!1,a.onlineStorePrice="Required!"),void 0!==l.compareAt&&""===n?(e=!1,a.compareAt="Required!"):parseFloat(n)<parseFloat(r)&&(e=!1,a.compareAt="CP must be greater than OSP"),Object.keys(a).length>0&&(i[t.id]=a)})),Q(i),e})()&&H(!0)},children:"Bulk Modify Price"}),(0,C.jsx)(p.A,{currentPageIndex:D,onChange:e=>{let{detail:i}=e;return t=i.currentPageIndex,void L(t+0);var t},pagesCount:Math.ceil(J.length/20)})]})]}),variant:"borderless",columnDefinitions:[{id:"code",header:"Item Code",cell:e=>(0,C.jsx)(f.N_,{to:"/app/products/".concat(e.id),children:e.itemCode})},{id:"name",header:"Name",cell:e=>(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,C.jsx)("img",{src:null===e||void 0===e?void 0:e.images[0],alt:e.name,height:35,width:35,style:{borderRadius:"8px",marginRight:"10px"}}),(0,C.jsx)("p",{style:{width:"90px"},children:e.name})]})},{id:"category",header:"Category",cell:e=>(0,C.jsx)(x.A,{textAlign:"center",children:null===e||void 0===e?void 0:e.category})},{id:"stock",header:"On Hand Quantity",cell:e=>(0,C.jsxs)(x.A,{textAlign:"center",children:[null===e||void 0===e?void 0:e.stockQuantity,"/",null===e||void 0===e?void 0:e.units]})},{id:"alert",header:"Stock Alert",cell:e=>{return(0,C.jsx)("div",{style:(i=null===e||void 0===e?void 0:e.stockQuantity,0===i?{color:"gray",textAlign:"center"}:i>5?{color:"#0972D3",textAlign:"center"}:{color:"red",textAlign:"center"}),children:0===(null===e||void 0===e?void 0:e.stockQuantity)?"Not Available":(null===e||void 0===e?void 0:e.stockQuantity)>5?"Available":"Low Stock"});var i}},{id:"onlineStorePrice",header:"Online Price",cell:e=>{var i,t,l;return(0,C.jsx)("div",{style:{width:"80px"},children:(0,C.jsx)(m.A,{errorText:null===(i=B[e.id])||void 0===i?void 0:i.onlineStorePrice,children:(0,C.jsx)(j.A,{disabled:!k.some((i=>i.id===e.id)),placeholder:"Enter Price",type:"number",value:null!==(t=null===(l=E[e.id])||void 0===l?void 0:l.onlineStorePrice)&&void 0!==t?t:e.onlineStorePrice,onChange:i=>G(e.id,"onlineStorePrice",i.detail.value),ariaLabel:"online store price"})})})}},{id:"compareAt",header:"Compare Price",cell:e=>{var i,t,l;return(0,C.jsx)("div",{style:{width:"80px"},children:(0,C.jsx)(m.A,{errorText:null===(i=B[e.id])||void 0===i?void 0:i.compareAt,children:(0,C.jsx)(j.A,{placeholder:"Enter Price",type:"number",value:null!==(t=null===(l=E[e.id])||void 0===l?void 0:l.compareAt)&&void 0!==t?t:e.compareAt,onChange:i=>G(e.id,"compareAt",i.detail.value),ariaLabel:"compare at price",disabled:!k.some((i=>i.id===e.id))})})})}},{id:"status",header:"Status",cell:i=>(0,C.jsx)("div",{style:{width:"90px"},children:(0,C.jsx)(A.A,{onChange:()=>(i=>{const t=!i.active;e((0,S.WJ)({id:i.id,active:t})).then((i=>{"fulfilled"===i.meta.requestStatus&&i.payload.status,e((0,S.j0)())}))})(i),checked:i.active,children:(0,C.jsx)("p",{children:i.active?"Active":"Inactive"})})})}],selectedItems:k,onSelectionChange:e=>{let{detail:i}=e;z(i.selectedItems)},items:Y,selectionType:"multi"})})]}),(0,C.jsx)(g.A,{visible:q,onDismiss:()=>H(!1),header:"Confirm Bulk Modify",footer:(0,C.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,C.jsx)(d.A,{variant:"link",onClick:()=>H(!1),children:"Cancel"}),(0,C.jsx)(d.A,{variant:"primary",onClick:()=>{let i=!0;k.forEach((t=>{var l,r;const n={onlineStorePrice:(null===(l=E[t.id])||void 0===l?void 0:l.onlineStorePrice)||t.onlineStorePrice,compareAt:(null===(r=E[t.id])||void 0===r?void 0:r.compareAt)||t.compareAt};e((0,S.OS)({id:t.id,pricingData:n})).then((e=>{"fulfilled"===e.meta.requestStatus&&200===e.payload.status||(i=!1)}))})),i&&(V(!0),z([])),H(!1)},children:"Confirm"})]}),children:"Are you sure you want to bulk modify the prices for the selected items?"})]})}}}]);
//# sourceMappingURL=687.974b91ac.chunk.js.map