"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[923],{1093:(e,t,s)=>{s.d(t,{A:()=>v});var a=s(5043),l=s(1985),r=s(8454),i=s(8205),n=s(4484),o=s(6799),d=s(3679),c=s(6446),p=s(2792),h=s(579);function u(){const e=(0,i.h)(),t=(0,n.N)(e,o.$i),s=(0,n.N)(e,o.O);return(0,h.jsx)(l.A,{className:"table-pagination",color:"primary",variant:"outlined",shape:"rounded",page:t+1,count:s,renderItem:e=>(0,h.jsx)(r.A,{...e,disableRipple:!0}),onChange:(t,s)=>e.current.setPage(s-1),hidePrevButton:!s,hideNextButton:!s})}class m extends a.Component{constructor(e){super(e)}render(){const{paginationDetails:e={pageSize:10,page:0},pagSize:t=5,data:s,columns:a,checkboxSelection:l=!0}=this.props.details;return(0,h.jsx)(c.A,{className:"common-table-container",children:(0,h.jsx)(d.z,{checkboxSelection:l,disableRowSelectionOnClick:!0,disableColumnMenu:!0,paginationModel:e,onPaginationModelChange:e=>{try{this.props.handlePageChange(e)}catch(t){console.error(t)}},pageSizeOptions:[t],slots:{pagination:u,noRowsOverlay:()=>p.ui},rows:s,columnHeaderHeight:44,columns:a.map((e=>({...e,sortable:!1,resizable:!1})))})})}}const v=m},3610:(e,t,s)=>{s.d(t,{A:()=>C});var a=s(5043),l=s(6446),r=s(8911),i=s(1906),n=s(9578),o=s(3156),d=s(2505),c=s(6060),p=s(4605),h=s(3217),u=s(2143),m=s(9648),v=s(1313),g=s(579);(0,c.A)("div")((e=>{let{theme:t}=e;return"\n  width: max-content;\n  padding: 12px 16px;\n  margin: 8px;\n  border-radius: 8px;\n  border: 1px solid ".concat("dark"===t.palette.mode?x[700]:x[200],";\n  background-color: ").concat("dark"===t.palette.mode?x[900]:"#fff",";\n  box-shadow: ").concat("dark"===t.palette.mode?"0px 4px 8px rgb(0 0 0 / 0.7)":"0px 4px 8px rgb(0 0 0 / 0.1)",";\n  font-family: 'IBM Plex Sans', sans-serif;\n  font-weight: 500;\n  font-size: 0.875rem;\n  z-index: 1;\n")}));const x={50:"#F3F6F9",100:"#E5EAF2",200:"#DAE2ED",300:"#C7D0DD",400:"#B0B8C4",500:"#9DA8B7",600:"#6B7A90",700:"#434D5B",800:"#303740",900:"#1C2025"};class b extends a.Component{constructor(e){var t;super(e),t=this,this.filterPopupToggle=e=>{try{let{beforeApplyFilters:l}=this.state;if(!e){var t,s,a;let e=null===(t=this.props.details)||void 0===t||null===(s=t.filter)||void 0===s||null===(a=s.selectedFilters)||void 0===a?void 0:a.filter((e=>!l.includes(e)));this.props.handleFilters(null,e)}this.setState({anchor:e,beforeApplyFilters:[]})}catch(l){console.error(l)}},this.renderFilterListItem=()=>{var e;let{filter:t}=this.props.details;if(null!==t&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length)return t.data.map(((e,s)=>{var a,l;return(0,g.jsx)(u.A,{children:(0,g.jsx)(p.A,{control:(0,g.jsx)(h.A,{size:"small",sx:{p:.5},id:e.label,checked:t.selectedFilters.includes(null===(a=e.label)||void 0===a||null===(l=a.toLowerCase())||void 0===l?void 0:l.replace(" ","_")),onClick:s=>{var a,l,r,i;let{beforeApplyFilters:n}=this.state,o=null===(a=e.label)||void 0===a||null===(l=a.toLowerCase())||void 0===l?void 0:l.replace(" ","_");s.target.checked?"all"===o?n=t.data.map((e=>{var t,s;return null===(t=e.label)||void 0===t||null===(s=t.toLowerCase())||void 0===s?void 0:s.replace(" ","_")})):n.push(o):n.filter((e=>e!==o)),this.props.handleFilters(null===(r=e.label)||void 0===r||null===(i=r.toLowerCase())||void 0===i?void 0:i.replace(" ","_")),this.setState({beforeApplyFilters:n})}}),label:e.label})},"item-".concat(s))}))},this.onClickFilters=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let{filter:s}=t.props.details;s.selectedFilters&&(t.filterPopupToggle(),t.props.applyOrCancelFilter(e))}catch(s){console.error(s)}},this.state={anchor:null,beforeApplyFilters:[]}}render(){var e,t;let{header:s,exportCsv:a,btnLabel:c,searchData:p,dataLength:h,dataRange:u,filter:x,importCsv:b,isOnlySearchVisible:C}=this.props.details;const{anchor:f}=this.state;return(0,g.jsxs)(l.A,{className:"list-heading d-flex align-items-center justify-content-between",children:[(0,g.jsxs)(l.A,{className:"d-block",children:[(0,g.jsx)("h2",{children:s}),(0,g.jsxs)("p",{children:["Showing ",u," of ",(0,g.jsx)("strong",{children:h})," "]})]}),(0,g.jsxs)(r.A,{direction:"row",spacing:1.5,children:[(0,g.jsxs)(l.A,{className:"top-search",children:[(0,g.jsx)("input",{type:"text",className:"form-control",placeholder:"Search",value:p,onChange:e=>{try{this.props.handleSearch(e.target.value)}catch(e){console.error(e)}}}),(0,g.jsx)("button",{className:"button",children:(0,g.jsx)(n.A,{})})]}),C?(0,g.jsx)(g.Fragment,{}):(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(l.A,{children:[(0,g.jsx)(i.A,{className:"btn-outline-secondary",type:"button",onClick:e=>this.filterPopupToggle(e.currentTarget),children:(null===x||void 0===x?void 0:x.label)||"Filters "}),null!==x&&void 0!==x&&null!==(e=x.data)&&void 0!==e&&e.length?(0,g.jsxs)(m.A,{className:"filter-popup-content",id:"basic-menu",anchorEl:this.state.anchor,open:f,onClose:()=>this.filterPopupToggle(null),MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,g.jsxs)("h4",{children:[null===x||void 0===x?void 0:x.header," "]}),this.renderFilterListItem(),(0,g.jsxs)(l.A,{className:"d-flex align-items-center justify-content-between",children:[(0,g.jsx)(i.A,{className:"cancel-btn",size:"small",onClick:()=>this.onClickFilters(0),children:"Cancel"}),(0,g.jsx)(i.A,{className:"apply-btn",size:"medium",onClick:()=>this.onClickFilters(1),children:"Apply filters"})]})]}):(0,g.jsx)(g.Fragment,{})]})}),b?(0,g.jsx)(i.A,{className:"btn-outline-secondary",variant:"outlined",startIcon:(0,g.jsx)(v.A,{}),children:b}):(0,g.jsx)(g.Fragment,{}),a?(0,g.jsx)(i.A,{className:"btn-outline-secondary",variant:"outlined",startIcon:(0,g.jsx)(o.A,{}),children:a}):(0,g.jsx)(g.Fragment,{}),c?(0,g.jsx)(i.A,{className:"primary-btn ",variant:"contained",startIcon:(0,g.jsx)(d.A,{}),children:c}):(0,g.jsx)(g.Fragment,{}),null!==(t=this.props.details)&&void 0!==t&&t.btnLabel2?(0,g.jsx)(i.A,{className:"primary-btn ",variant:"contained",startIcon:(0,g.jsx)(d.A,{}),children:this.props.details.btnLabel2}):(0,g.jsx)(g.Fragment,{})]})]})}}const C=b},3923:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var a=s(5043),l=s(1906),r=s(6446),i=s(3003),n=s(5719),o=s(5163),d=s(5067),c=s(1093),p=s(5475),h=s(3610),u=s(2792),m=s(579);const v=[{field:"customer_name",headerName:"Customer Name",width:150,renderCell:e=>(0,m.jsx)(p.N_,{to:e.value,children:e.value})},{field:"email",headerName:"Email",width:180,renderCell:e=>e.value},{field:"shipping_address",headerName:"Shipping Address",width:250,renderCell:e=>e.value},{field:"added_by",headerName:"Added By",width:130,renderCell:e=>e.value},{field:"added_on",headerName:"Added On",width:180,renderCell:e=>e.value},{field:"last_order",headerName:"Last Order",width:180,renderCell:e=>e.value},{field:"actions",headerName:"Actions",width:240,renderCell:e=>e.value,renderCell:()=>(0,m.jsxs)("div",{className:"table-btns",children:[(0,m.jsx)(l.A,{className:"primary-outline",variant:"primary",children:"View More"}),(0,m.jsx)(l.A,{className:"primary",variant:"primary",children:"Create Quotes"})]})}];let{APPROVED:g,UNDER_REVIEW:x,REJECTED:b,FAVOURITE_CUSTOMER:C,NEW_CUSTOMER:f}=u.ac;const A=[{label:"All"},{label:C},{label:f}];class j extends a.Component{constructor(e){super(e),this.componentDidMount=()=>{this.props.fetchCustomers()},this.state={customersData:[],selectedFilters:[],paginationDetails:{pageSize:10,page:0}}}componentDidUpdate(e,t){var s,a;e.customers.status!==this.props.customers.status&&this.props.customers.status===n.A.SUCCESS&&null!==(s=this.props.customers)&&void 0!==s&&s.data&&this.manipulationData((null===(a=this.props.customers)||void 0===a?void 0:a.data.customers)||[])}manipulationData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,{customersData:a,selectedFilters:l}=this.state;if(a=[],null!==e&&void 0!==e&&e.length){let r=JSON.parse(JSON.stringify(e));t&&(r=e.filter((e=>!!(null!==e&&void 0!==e&&e.customer_name.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.added_by.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.added_on.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.email.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.last_order.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.shipping_address.toLowerCase().includes(t.toLowerCase()))||null))),s?r=r.filter((e=>l.includes(e.status.toLowerCase().replace(" ","_")))):l=[],r.forEach((e=>{var t,s;a.push({...e,statusClass:null===e||void 0===e||null===(t=e.status)||void 0===t||null===(s=t.toLowerCase())||void 0===s?void 0:s.replace(" ","_")})}))}this.setState({customersData:a,searchData:t,selectedFilters:l})}render(){const{customersData:e,paginationDetails:{page:t,pageSize:s},searchData:a,selectedFilters:l}=this.state,i=t*s+1,o=t*s+s;return(0,m.jsx)(r.A,{className:"main-container",children:(0,m.jsxs)(r.A,{className:"qutations-container",children:[(0,m.jsx)(h.A,{details:{header:"Customers",filterLabel:"",exportCsv:"Export as CSV",importCsv:"Import",isOnlySearchVisible:!1,btnLabel:"Customers",dataLength:e.length,searchData:a,dataRange:e.length?(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("strong",{children:[i," -",o]})}):0,filter:{label:"Filters",data:A,header:"Status",selectedFilters:l}},handleSearch:e=>{var t;this.manipulationData((null===(t=this.props.customers)||void 0===t?void 0:t.data.customers)||[],e)},handleFilters:(e,t)=>{let{selectedFilters:s}=this.state;t?s=t:s.includes(e)?s="all"===e?[]:s.filter((t=>![e,"all"].includes(t))):"all"===e?s=A.map((e=>e.label.toLowerCase().replace(" ","_"))):s.push(e),console.log(s,t),this.setState({selectedFilters:s})},applyOrCancelFilter:e=>{var t;this.manipulationData((null===(t=this.props.quotations)||void 0===t?void 0:t.data.quotations)||[],a,e?1:0)}}),this.props.customers.status===n.A.IN_PROGRESS?d.aH.commonLoader():(0,m.jsx)(c.A,{details:{paginationDetails:{page:t,pageSize:s},pagSize:10,data:e,columns:v,checkboxSelection:!0},handlePageChange:e=>{this.setState({paginationDetails:e})}})]})})}}const F={fetchCustomers:o.g},w=(0,i.Ng)((function(e){const{customers:t}=e.customers;return{customers:t}}),F)(j)}}]);
//# sourceMappingURL=923.9a19cf99.chunk.js.map