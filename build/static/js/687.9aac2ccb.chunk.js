"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[687],{6687:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var l=i(5043),s=i(4712),a=i(7880),r=i(6255),n=i(2521),o=i(8003),d=i(2671),c=i(5165),h=i(4154),u=i(9971),p=i(5336),v=i(6421),x=i(8811),m=i(5416),g=i(500),j=i(9545),y=i(3941),A=i(3003),f=i(5475),b=i(1013),S=i(5664),C=(i(7179),i(6600)),P=i(2332),k=i(579);const w=e=>{var t;let{products:i}=e;const s=(0,A.wA)(),a=(0,A.d4)((e=>e.orders.ordersData)),{data:r=[]}=a;(0,l.useEffect)((()=>{s((0,P.Gb)())}),[s]);const[n,o]=(0,l.useState)([]),[d,c]=(0,l.useState)([]);return(0,l.useEffect)((()=>{if(i.data){const e=[],t=[];i.data.map((i=>(!0===i.active?e.push(i):!1===i.active&&t.push(i),null))),o(e),c(t)}}),[i]),(0,k.jsxs)(C.A,{columns:5,variant:"default",minColumnWidth:170,children:[(0,k.jsxs)("div",{children:[(0,k.jsx)(v.A,{variant:"awsui-key-label",children:(0,k.jsx)("p",{style:{fontSize:12},children:" Active Products"})}),(0,k.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===n||void 0===n?void 0:n.length})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(v.A,{variant:"awsui-key-label",children:(0,k.jsx)("p",{style:{fontSize:12},children:"Total Stock"})}),(0,k.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:"436K"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(v.A,{variant:"awsui-key-label",children:(0,k.jsx)("p",{style:{fontSize:12},children:"Total Orders"})}),(0,k.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===(t=r.items)||void 0===t?void 0:t.length})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(v.A,{variant:"awsui-key-label",children:(0,k.jsx)("p",{style:{fontSize:12},children:"Net Profit"})}),(0,k.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:"\u20b9123K"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)(v.A,{variant:"awsui-key-label",children:(0,k.jsx)("p",{style:{fontSize:12},children:"Inactive Products"})}),(0,k.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===d||void 0===d?void 0:d.length})]})]})},z=()=>{const e=(0,A.wA)(),{data:t=[],nextKey:i,status:C,error:P}=(0,A.d4)((e=>e.products.products)),[z,F]=(0,l.useState)([]),[V,D]=(0,l.useState)(""),[E,T]=(0,l.useState)("All"),[L,O]=(0,l.useState)("All"),[I,B]=(0,l.useState)({}),[R,W]=(0,l.useState)(!1),[q,H]=(0,l.useState)(!1),[K,G]=(0,l.useState)(!1),[_,N]=(0,l.useState)(!1),[M,Q]=(0,l.useState)({}),[J,U]=(0,l.useState)(!1),[$,X]=(0,l.useState)(null),[Y,Z]=(0,l.useState)(!1),ee=(0,l.useRef)();(0,l.useEffect)((()=>{e((0,S.I$)()),e((0,b.j0)({search:V,category:E,active:L}))}),[e,L,V,E]);const te=(e,t,i)=>{B((l=>({...l,[e]:{...l[e],[t]:i}}))),ie(e,t,i)},ie=(e,t,i)=>{var l;const s=i,a="compareAt"===t?i:(null===(l=I[e])||void 0===l?void 0:l.compareAt)||"";let r={};"onlineStorePrice"!==t||s||(r.onlineStorePrice="Required!"),"compareAt"===t&&(a?parseFloat(a)<parseFloat(s)&&(r.compareAt="CP must be greater than OSP"):r.compareAt="Required!"),Q((t=>({...t,[e]:r})))},le=[{label:"All",value:"All"},{label:"Leafy Vegetables",value:"Leafy Vegetables"},{label:"Fruit",value:"Fruit"},{label:"Vegetable",value:"Vegetable"},{label:"Bengali Vegetable",value:"Bengali Vegetable"}],se=[{label:"All",value:"All"},{label:"Active",value:"true"},{label:"Inactive",value:"false"}],ae=()=>{let e=!0;const t={};return z.forEach((i=>{const l=I[i.id]||{},s=l.onlineStorePrice||i.onlineStorePrice,a=l.compareAt||i.compareAt;let r={};s||(e=!1,r.onlineStorePrice="Required!"),a?parseFloat(a)<parseFloat(s)&&(e=!1,r.compareAt="CP must be greater than OSP"):(e=!1,r.compareAt="Required!"),Object.keys(r).length>0&&(t[i.id]=r)})),Q(t),e},[re,ne]=(0,l.useState)([{type:"info",dismissible:!0,dismissLabel:"Dismiss message",onDismiss:()=>ne([]),content:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("b",{children:"Price updated successfully! "}),(0,k.jsx)("p",{children:"The new price is now live on the online store"})]}),id:"message_1"}]),[oe,de]=(0,l.useState)([{type:"info",dismissible:!0,dismissLabel:"Dismiss message",onDismiss:()=>de([]),content:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("b",{children:"Status Updated successfully "}),(0,k.jsx)("p",{children:"Toggle status have been updated successfully"})]}),id:"message_1"}]),ce=(0,l.useCallback)((t=>{"loading"!==C&&(ee.current&&ee.current.disconnect(),ee.current=new IntersectionObserver((t=>{t[0].isIntersecting&&i&&(Z(!0),e((0,b.j0)({search:V,category:E,nextKey:i})).finally((()=>Z(!1))))})),t&&ee.current.observe(t))}),[C,i,e,V,E]);return(0,k.jsxs)(s.A,{notifications:(0,k.jsxs)(k.Fragment,{children:[J&&(0,k.jsx)(a.A,{items:oe}),_&&(0,k.jsx)(a.A,{items:re})]}),breadcrumbs:(0,k.jsx)(r.A,{items:[{text:"Dashboard",href:"/app/dashboard"},{text:"Products",href:"/app/dashboard/products"}],ariaLabel:"Breadcrumbs"}),headerVariant:"high-contrast",header:(0,k.jsx)(n.A,{actions:(0,k.jsx)(o.A,{alignItems:"center",direction:"horizontal",size:"xs"}),variant:"h1",children:"Products"}),children:[(0,k.jsxs)(o.A,{direction:"vertical",size:"s",children:[(0,k.jsx)(d.A,{children:(0,k.jsx)(w,{products:{data:t,nextKey:i,status:C,error:P}})}),(0,k.jsxs)("div",{children:[(0,k.jsx)(c.A,{header:(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,k.jsx)("div",{style:{width:"360px"},children:(0,k.jsx)(h.A,{filteringPlaceholder:"Search",filteringText:V,onChange:e=>{D(e.detail.filteringText)}})}),(0,k.jsx)("div",{style:{width:"110px"},children:(0,k.jsx)(u.A,{options:le,selectedOption:le.find((e=>e.value===E)),onChange:e=>{let{detail:t}=e;T(t.selectedOption.value)},placeholder:"Select Category"})}),(0,k.jsx)("div",{style:{width:"100px"},children:(0,k.jsx)(u.A,{options:se,selectedOption:se.find((e=>e.value===L)),onChange:e=>{let{detail:t}=e;O(t.selectedOption.value)},placeholder:"Select Status"})})]}),(0,k.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[K&&(0,k.jsx)(p.A,{variant:"normal",onClick:()=>{const e={"Leafy Vegetables":"/category/VEGETABLES/Leafy%20Vegetables",Fruit:"/category/Fruits/Fresh%20Fruits",Vegetable:"/category/VEGETABLES/Fresh%20Vegetables","Bengali Vegetable":"/category/VEGETABLES/Bengali%20Vegetables"}[E]||"";window.open("".concat("https://promodeagro.com").concat(e),"_blank")},children:"View On Store"}),(0,k.jsx)(p.A,{disabled:0===z.length,variant:"normal",onClick:()=>{ae()&&H(!0)},children:"Bulk Modify Price"})]})]}),variant:"borderless",columnDefinitions:[{id:"code",header:"Item Code",cell:e=>(0,k.jsx)(f.N_,{to:"/app/products/".concat(e.id),children:e.itemCode})},{id:"name",header:"Name",cell:e=>(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,k.jsx)("img",{src:null===e||void 0===e?void 0:e.images[0],alt:e.name,height:35,width:35,style:{borderRadius:"8px",marginRight:"10px"}}),(0,k.jsx)("p",{style:{width:"90px"},children:e.name})]})},{id:"category",header:"Category",cell:e=>(0,k.jsx)(v.A,{textAlign:"center",children:null===e||void 0===e?void 0:e.category})},{id:"stock",header:"On Hand Quantity",cell:e=>(0,k.jsxs)(v.A,{textAlign:"center",children:[null===e||void 0===e?void 0:e.stockQuantity,"/",null===e||void 0===e?void 0:e.units]})},{id:"alert",header:"Stock Alert",cell:e=>(0,k.jsx)("p",{style:{color:"#0972D3",textAlign:"center"},children:"Available"})},{id:"onlineStorePrice",header:"Online Price",cell:e=>{var t,i,l;return(0,k.jsx)("div",{style:{width:"80px"},children:(0,k.jsx)(x.A,{errorText:null===(t=M[e.id])||void 0===t?void 0:t.onlineStorePrice,children:(0,k.jsx)(m.A,{disabled:!z.some((t=>t.id===e.id)),placeholder:"Enter Price",type:"number",value:null!==(i=null===(l=I[e.id])||void 0===l?void 0:l.onlineStorePrice)&&void 0!==i?i:e.onlineStorePrice,onChange:t=>te(e.id,"onlineStorePrice",t.detail.value),ariaLabel:"online store price"})})})}},{id:"compareAt",header:"Compare Price",cell:e=>{var t,i,l;return(0,k.jsx)("div",{style:{width:"80px"},children:(0,k.jsx)(x.A,{errorText:null===(t=M[e.id])||void 0===t?void 0:t.compareAt,children:(0,k.jsx)(m.A,{placeholder:"Enter Price",type:"number",value:null!==(i=null===(l=I[e.id])||void 0===l?void 0:l.compareAt)&&void 0!==i?i:e.compareAt,onChange:t=>te(e.id,"compareAt",t.detail.value),ariaLabel:"compare at price",disabled:!z.some((t=>t.id===e.id))})})})}},{id:"status",header:"Status",cell:e=>(0,k.jsx)("div",{style:{width:"90px"},children:(0,k.jsx)(g.A,{onChange:()=>(e=>{X(e),W(!0)})(e),checked:e.active,children:(0,k.jsx)("p",{children:e.active?"Active":"Inactive"})})})}],selectedItems:z,onSelectionChange:e=>{let{detail:t}=e;F(t.selectedItems)},items:t,selectionType:"multi"}),(0,k.jsx)("div",{ref:ce,style:{height:"20px"},children:Y&&(0,k.jsx)(j.A,{})})]}),"failed"===C&&(0,k.jsx)(v.A,{color:"red",children:P})]}),(0,k.jsx)(y.A,{visible:q,onDismiss:()=>H(!1),header:"Confirm Bulk Modify",footer:(0,k.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,k.jsx)(p.A,{variant:"link",onClick:()=>H(!1),children:"Cancel"}),(0,k.jsx)(p.A,{variant:"primary",onClick:async()=>{const t=z.map((e=>{var t,i;return{id:e.id,compareAt:parseFloat((null===(t=I[e.id])||void 0===t?void 0:t.compareAt)||e.compareAt),onlineStorePrice:parseFloat((null===(i=I[e.id])||void 0===i?void 0:i.onlineStorePrice)||e.onlineStorePrice)}}));try{const i=await e((0,b.OS)(t));"fulfilled"===i.meta.requestStatus&&i.payload.status,N(!0),G(!0),F([]),H(!1),setTimeout((()=>{N(!1)}),5e3)}catch(i){console.error("Failed to update product pricing:",i),G(!1)}},children:"Confirm"})]}),children:"Are you sure you want to bulk modify the prices for the selected items?"}),(0,k.jsxs)(y.A,{onDismiss:()=>W(!1),visible:R,closeAriaLabel:"Close modal",header:"Confirm Status Change",footer:(0,k.jsx)(v.A,{float:"right",children:(0,k.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,k.jsx)(p.A,{variant:"link",onClick:()=>W(!1),children:"Cancel"}),(0,k.jsx)(p.A,{onClick:()=>{const t=!$.active;e((0,b.WJ)({id:$.id,active:t})).then((t=>{"fulfilled"===t.meta.requestStatus&&200===t.payload.status?e((0,b.j0)({search:V,category:E,active:L})):e((0,b.j0)({search:V,category:E}))})),U(!0),W(!1),setTimeout((()=>{U(!1)}),5e3)},variant:"primary",children:"Confirm"})]})}),children:["Are you sure you want to ",null!==$&&void 0!==$&&$.active?"deactivate":"activate"," this product?"]})]})}}}]);
//# sourceMappingURL=687.9aac2ccb.chunk.js.map