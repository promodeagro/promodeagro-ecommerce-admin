"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[211],{7211:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var i=r(5043),s=r(3003),l=r(2332),a=r(4712),n=r(6255),o=r(2521),d=r(8003),c=r(2671),u=r(6600),h=r(6421),m=r(7468),v=r(4154),x=r(9971),A=r(5336),g=r(3372),f=r(5165),p=r(5475),y=r(3941),j=r(579);const b=()=>{var e,t,r,b,C;const w=(0,s.wA)(),S=(0,s.d4)((e=>e.orders.ordersData)),D=(0,s.d4)((e=>e.orders.order_status)),O=(null===S||void 0===S?void 0:S.data)||{},[k,N]=(O.items,(0,i.useState)([])),[z,I]=(0,i.useState)(1),[E,W]=(0,i.useState)("All"),[L,P]=(0,i.useState)(""),[T,G]=(0,i.useState)(null),[H,B]=(0,i.useState)(!1),[M,_]=(0,i.useState)(!1),[F,J]=(0,i.useState)(null),[K,R]=(0,i.useState)(null),[V,q]=(0,i.useState)(!1);(0,i.useEffect)((()=>{w((0,l.Gb)()),w((0,l.rA)())}),[w]);const Q=10*z,U=Q-10,X=(O&&O.items?O.items.filter((e=>{const t="All"===E||"Confirmed"===E&&"order placed"===e.orderStatus||e.orderStatus===E,r=e.id.toLowerCase().includes(L.toLowerCase());return t&&r})):[]).slice(U,Q),Y=[{label:"All",value:"All"},{label:"Order Confirmed",value:"order placed"},{label:"Packed",value:"Packed"},{label:"On the Way",value:"On The Way"},{label:"Delivered",value:"Delivered"}],Z=()=>{_(!1)},$=()=>{B(!1)},ee=()=>{q(!1)};return(0,j.jsx)(a.A,{headerVariant:"high-contrast",breadcrumbs:(0,j.jsx)(n.A,{items:[{text:"Dashboard",href:"/app/Dashboard"},{text:"Orders",href:"#"}],ariaLabel:"Breadcrumbs"}),header:(0,j.jsx)(o.A,{variant:"h1",children:"Orders"}),children:(0,j.jsxs)(d.A,{direction:"vertical",size:"xl",children:[(0,j.jsx)(c.A,{className:"top-container",style:{marginBottom:"1rem"},children:(0,j.jsxs)(u.A,{columns:5,variant:"default",minColumnWidth:170,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Total Orders"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:(null===D||void 0===D||null===(e=D.data)||void 0===e?void 0:e.totalOrderCount)||"N/A"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Completed"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===D||void 0===D||null===(t=D.data)||void 0===t?void 0:t.completedOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Confirmed"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===D||void 0===D||null===(r=D.data)||void 0===r?void 0:r.confirmedOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Cancelled"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===D||void 0===D||null===(b=D.data)||void 0===b?void 0:b.cancelledOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Refunded"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===D||void 0===D||null===(C=D.data)||void 0===C?void 0:C.refundedOrderCount})]})]})}),(0,j.jsxs)(d.A,{direction:"vertical",size:"s",children:[(0,j.jsx)(h.A,{children:(0,j.jsxs)(m.A,{disableGutters:!0,gridDefinition:[{colspan:{default:12,xxs:6}},{colspan:{default:12,xxs:6}}],children:[(0,j.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,j.jsx)(v.A,{filteringPlaceholder:"Search",filteringText:L,onChange:e=>{P(e.detail.filteringText)}}),(0,j.jsx)(x.A,{options:Y,selectedOption:Y.find((e=>e.value===E)),onChange:e=>{let{detail:t}=e;W(t.selectedOption.value),N([]),I(1)},placeholder:"Sort by Status"})]}),(0,j.jsxs)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:["order placed"===E&&(0,j.jsx)(A.A,{disabled:0===k.length,onClick:()=>{_(!0)},children:"Move to Packed"}),"packed"===E&&(0,j.jsx)(A.A,{disabled:0===k.length,onClick:()=>{B(!0)},children:"Assign Orders"}),"on the way"===E&&(0,j.jsx)(A.A,{disabled:0===k.length,onClick:()=>{q(!0)},children:"Move to Delivered"}),(0,j.jsx)(g.A,{currentPageIndex:z-1,onChange:e=>{let{detail:t}=e;return r=t.currentPageIndex,void I(r+1);var r},openEnd:!0,pagesCount:5})]})]})}),(0,j.jsx)(y.A,{onDismiss:Z,visible:M,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(d.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(A.A,{variant:"link",onClick:Z,children:"Cancel"}),(0,j.jsx)(A.A,{variant:"primary",onClick:async()=>{try{if(!Array.isArray(k)||0===k.length)throw new Error("No items selected or invalid selection.");const e=k.map((e=>e.id)),t=await w((0,l.Kv)({ids:e,status:"Packed"})).unwrap();if("success"!==t.message)throw new Error("Failed to update order status");console.log("Order status updated successfully:",t),await w((0,l.Gb)()),_(!1)}catch(e){console.error("Error updating order status:",e)}},children:"Confirm"})]})}),header:"Move to Packed Orders",children:"Are you sure you want to move the selected orders to the 'Packed Orders' stage?"}),(0,j.jsx)(y.A,{onDismiss:$,visible:H,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(d.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(A.A,{variant:"link",onClick:$,children:"Cancel"}),(0,j.jsx)(A.A,{variant:"primary",onClick:async()=>{try{if(!Array.isArray(k)||0===k.length)throw new Error("No items selected or invalid selection.");const e=k.map((e=>e.id)),t=T.value;if(!Array.isArray(e)||0===e.length)throw new Error("Invalid order IDs.");const r=await w((0,l.aC)({orderIds:e,assignee:t,status:"On The Way"})).unwrap();if("success"!==r.message)throw new Error("Failed to assign delivery boy and update order status");console.log("Orders assigned and status updated successfully:",r),await w((0,l.Gb)()),B(!1)}catch(e){console.error("Error assigning delivery boy and updating order status:",e)}},children:"Confirm"})]})}),header:"Assign Orders",children:(0,j.jsx)(x.A,{options:[{label:"sohail",value:"sohail"},{label:"Jane Smith",value:"jane_smith"},{label:"Alice Johnson",value:"alice_johnson"}],selectedOption:T,onChange:e=>{let{detail:t}=e;G(t.selectedOption)},placeholder:"Select an assignee"})}),(0,j.jsx)(y.A,{onDismiss:ee,visible:V,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(d.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(A.A,{variant:"link",onClick:ee,children:"Cancel"}),(0,j.jsx)(A.A,{variant:"primary",onClick:async()=>{try{if(!Array.isArray(k)||0===k.length)throw new Error("No items selected or invalid selection.");const e=k.map((e=>e.id)),t=await w((0,l.Kv)({ids:e,status:"Delivered"})).unwrap();if("success"!==t.message)throw new Error("Failed to update order status");console.log("Order status updated to delivered successfully:",t),await w((0,l.Gb)()),q(!1)}catch(e){console.error("Error updating order status:",e)}},children:"Confirm"})]})}),header:"Move to Delivered",children:"Are you sure you want to move the selected orders to the Delivered Orders stage?"}),(0,j.jsx)(f.A,{renderAriaLive:e=>{let{firstIndex:t,lastIndex:r,totalItemsCount:i}=e;return"Displaying items ".concat(t+1," to ").concat(r," of ").concat(i)},onSelectionChange:e=>{let{detail:t}=e;return N(t.selectedItems)},selectedItems:k,ariaLabels:{selectionGroupLabel:"Items selection",allItemsSelectionLabel:e=>{let{selectedItems:t}=e;return"".concat(t.length," ").concat(1===t.length?"item":"items"," selected")},itemSelectionLabel:(e,t)=>{let{selectedItems:r}=e;return t.name}},items:X,columnDefinitions:[{id:"id",header:"Order ID",cell:e=>e.id?(0,j.jsxs)(p.N_,{to:"/app/order/orderdetail/".concat(e.id),children:["#",e.id]}):"N/A"},{id:"orderDate",header:"Order Date",cell:e=>{if(!e.orderDate)return"N/A";return new Date(e.orderDate).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-")}},{id:"customerName",header:"Customer Name",cell:e=>e.customerName&&e.customerName&&e.customerName?e.customerName:"N/A"},{id:"item",header:"Item",cell:e=>{if(e.items){const t=e.items;return"".concat(t,1===t?" Item":" Items")}return"N/A"}},{id:"paymentStatus",header:"Payment Status",cell:e=>e.paymentStatus||"N/A"},{id:"orderStatus",header:"Order Status",cell:e=>e.orderStatus||"N/A"},{id:"totalAmount",header:"Total Amount",cell:e=>e.totalAmount?"Rs. ".concat(e.totalAmount):"N/A"},{id:"area",header:"Delivery Area",cell:e=>e.area||"N/A"}],loadingText:"Loading resources",selectionType:"multi",trackBy:"id",variant:"borderless",empty:(0,j.jsx)(h.A,{margin:{vertical:"xs"},textAlign:"center",color:"inherit",children:(0,j.jsx)(d.A,{size:"m",children:(0,j.jsx)("b",{children:"No Orders"})})})})]})]})})}}}]);
//# sourceMappingURL=211.90f8c560.chunk.js.map