"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[211],{7211:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var s=r(5043),l=r(3003),i=r(2332),a=r(4712),n=r(6255),d=r(2521),o=r(8003),c=r(2671),u=r(6600),h=r(6421),v=r(7468),m=r(4154),x=r(9971),f=r(5336),g=r(3372),y=r(5165),A=r(5475),p=r(3941),j=r(579);const b=()=>{var e,t,r,b,O;const S=(0,l.wA)(),w=(0,l.d4)((e=>e.orders.ordersData)),C=(0,l.d4)((e=>e.orders.order_status)),D=((null===w||void 0===w?void 0:w.data)||{}).items||[],[k,N]=(0,s.useState)([]),[E,z]=(0,s.useState)(1),[I,W]=(0,s.useState)("Order Confirmed"),[B,P]=(0,s.useState)(""),[G,T]=(0,s.useState)(null),[L,M]=(0,s.useState)(!1),[H,J]=(0,s.useState)(!1),[_,F]=(0,s.useState)(null),[K,R]=(0,s.useState)(null),[V,q]=(0,s.useState)(!1),[Q,U]=(0,s.useState)(""),[X,Y]=(0,s.useState)([]),[Z,$]=(0,s.useState)(!1),[ee,te]=s.useState();(0,s.useEffect)((()=>{S((0,i.Gb)({search:B,status:I}))}),[S,B,I]),(0,s.useEffect)((()=>{S((0,i.rA)())}),[S]),(0,s.useEffect)((()=>{(()=>{let e=D;I&&(e=D.filter((e=>e.orderStatus===I))),Y((t=>JSON.stringify(t)!==JSON.stringify(e)?e:t))})()}),[I,D]),(0,s.useEffect)((()=>{"delivered"!==I||ee||te({label:"7 Days Old",value:"1"})}),[I]);const re=50*(E-1),se=50*E,le=(X.slice(re,se),[{label:"Order Confirmed",value:"Order Confirmed"},{label:"Packed",value:"packed"},{label:"On The Way",value:"on the way"},{label:"Delivered",value:"delivered"}]),ie=()=>{J(!1)},ae=()=>{M(!1)},ne=()=>{q(!1)};return(0,j.jsx)(a.A,{headerVariant:"high-contrast",breadcrumbs:(0,j.jsx)(n.A,{items:[{text:"Dashboard",href:"/app/Dashboard"},{text:"Orders",href:"#"}],ariaLabel:"Breadcrumbs"}),header:(0,j.jsx)(d.A,{variant:"h1",children:"Orders"}),children:(0,j.jsxs)(o.A,{direction:"vertical",size:"xl",children:[(0,j.jsx)(c.A,{className:"top-container",style:{marginBottom:"1rem"},children:(0,j.jsxs)(u.A,{columns:5,variant:"default",minColumnWidth:170,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Total Orders"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:(null===C||void 0===C||null===(e=C.data)||void 0===e?void 0:e.totalOrderCount)||"N/A"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Completed"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===C||void 0===C||null===(t=C.data)||void 0===t?void 0:t.completedOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Confirmed"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===C||void 0===C||null===(r=C.data)||void 0===r?void 0:r.confirmedOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Cancelled"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===C||void 0===C||null===(b=C.data)||void 0===b?void 0:b.cancelledOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Refunded"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===C||void 0===C||null===(O=C.data)||void 0===O?void 0:O.refundedOrderCount})]})]})}),(0,j.jsxs)(o.A,{direction:"vertical",size:"s",children:[(0,j.jsx)(h.A,{children:(0,j.jsxs)(v.A,{disableGutters:!0,gridDefinition:[{colspan:{default:12,xxs:6}},{colspan:{default:12,xxs:6}}],children:[(0,j.jsxs)("div",{style:{display:"flex",gap:"0.4rem"},children:[(0,j.jsx)(m.A,{filteringPlaceholder:"Search",filteringText:B,onChange:e=>{P(e.detail.filteringText),z(1)}}),(0,j.jsx)(x.A,{options:le,selectedOption:le.find((e=>e.value===I))?{label:"Order Confirmed"===I?"Sort By Status":"packed"===I?"Sort By Pack":"on the way"===I?"Sort By On The Way":"delivered"===I?"Sort By Delivered":"Sort By Status",value:I}:null,onChange:async e=>{let{detail:t}=e;const r=t.selectedOption.value;U(r),W(r),N([]),z(1),await S((0,i.Gb)({search:B,status:r}))}}),"delivered"===I&&(0,j.jsx)(x.A,{selectedOption:ee,onChange:e=>{let{detail:t}=e;return te(t.selectedOption)},options:[{label:"7 Days Old",value:"1"},{label:"14 Days Old",value:"2"},{label:"1 Month Old",value:"3"},{label:"2 Month Old",value:"4"},{label:"Old Orders",value:"5"}],placeholder:"Completed Order"})]}),(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:["Order Confirmed"===I&&(0,j.jsx)(f.A,{disabled:0===k.length,onClick:()=>{J(!0)},children:"Move to Packed"}),"packed"===I&&(0,j.jsx)(f.A,{disabled:0===k.length,onClick:()=>{M(!0)},children:"Assign Orders"}),"on the way"===I&&(0,j.jsx)(f.A,{disabled:0===k.length,onClick:()=>{q(!0)},children:"Move to Delivered"}),(0,j.jsx)(g.A,{currentPageIndex:E,onChange:e=>{let{detail:t}=e;return(async e=>{z(e),await S((0,i.Gb)({search:B,status:I}))})(t.currentPageIndex)},openEnd:!0,pagesCount:5})]})]})}),(0,j.jsx)(p.A,{onDismiss:ie,visible:H,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(f.A,{variant:"link",onClick:ie,children:"Cancel"}),(0,j.jsx)(f.A,{variant:"primary",onClick:async()=>{try{if(!Array.isArray(k)||0===k.length)throw new Error("No items selected or invalid selection.");const e=k.map((e=>e.id)),t=await S((0,i.Kv)({ids:e,status:"Packed"})).unwrap();if("success"!==t.message)throw new Error("Failed to update order status");console.log("Order status updated successfully:",t),await S((0,i.Gb)()),window.location.reload(),J(!1)}catch(e){console.error("Error updating order status:",e)}},children:"Confirm"})]})}),header:"Move to Packed Orders",children:"Are you sure you want to move the selected orders to the 'Packed Orders' stage?"}),(0,j.jsxs)(p.A,{onDismiss:ae,visible:L,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(f.A,{variant:"link",onClick:ae,children:"Cancel"}),(0,j.jsx)(f.A,{variant:"primary",onClick:async()=>{try{if(!G)return void $(!0);if($(!1),!Array.isArray(k)||0===k.length)throw new Error("No items selected or invalid selection.");const e=k.map((e=>e.id)),t=G.value;if(!Array.isArray(e)||0===e.length)throw new Error("Invalid order IDs.");const r=await S((0,i.aC)({orderIds:e,assignee:t,status:"On The Way"})).unwrap();if("success"!==r.message)throw new Error("Failed to assign delivery boy and update order status");console.log("Orders assigned and status updated successfully:",r),await S((0,i.Gb)()),window.location.reload(),M(!1)}catch(e){console.error("Error assigning delivery boy and updating order status:",e)}},children:"Assign"})]})}),header:"Assign Orders",children:[(0,j.jsx)("h3",{style:{marginBottom:"0.5em"},children:"Select Assignee"}),(0,j.jsx)(x.A,{options:[{label:"sohail",value:"sohail"},{label:"Jane Smith",value:"jane_smith"},{label:"Alice Johnson",value:"alice_johnson"}],selectedOption:G,onChange:e=>{let{detail:t}=e;T(t.selectedOption)},placeholder:"Select Assignee",invalid:Z&&!G})]}),(0,j.jsx)(p.A,{onDismiss:ne,visible:V,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(f.A,{variant:"link",onClick:ne,children:"Cancel"}),(0,j.jsx)(f.A,{variant:"primary",onClick:async()=>{try{if(!Array.isArray(k)||0===k.length)throw new Error("No items selected or invalid selection.");const e=k.map((e=>e.id)),t=await S((0,i.Kv)({ids:e,status:"Delivered"})).unwrap();if("success"!==t.message)throw new Error("Failed to update order status");console.log("Order status updated to delivered successfully:",t),await S((0,i.Gb)()),window.location.reload(),q(!1)}catch(e){console.error("Error updating order status:",e)}},children:"Confirm"})]})}),header:"Move to Delivered",children:"Are you sure you want to move the selected orders to the Delivered Orders stage?"}),(0,j.jsx)(y.A,{renderAriaLive:e=>{let{firstIndex:t,lastIndex:r,totalItemsCount:s}=e;return"Displaying items ".concat(t+1," to ").concat(r," of ").concat(s)},onSelectionChange:e=>{let{detail:t}=e;return N(t.selectedItems)},selectedItems:k,ariaLabels:{selectionGroupLabel:"Items selection",allItemsSelectionLabel:e=>{let{selectedItems:t}=e;return"".concat(t.length," ").concat(1===t.length?"item":"items"," selected")},itemSelectionLabel:(e,t)=>{let{selectedItems:r}=e;return t.name}},items:X,columnDefinitions:[{id:"id",header:"Order ID",cell:e=>e.id?(0,j.jsxs)(A.N_,{to:"/app/order/orderdetail/".concat(e.id),children:["#",e.id]}):"N/A"},{id:"orderDate",header:"Order Date",cell:e=>{if(!e.orderDate)return"N/A";return new Date(e.orderDate).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-")}},{id:"customerName",header:"Customer Name",cell:e=>e.customerName&&e.customerName&&e.customerName?e.customerName:"N/A"},{id:"item",header:"Item",cell:e=>{if(e.items){const t=e.items;return"".concat(t,1===t?" Item":" Items")}return"N/A"}},{id:"paymentStatus",header:"Payment Status",cell:e=>e.paymentStatus||"N/A"},{id:"orderStatus",header:"Order Status",cell:e=>e.orderStatus||"N/A"},{id:"totalAmount",header:"Total Amount",cell:e=>e.totalAmount?"Rs. ".concat(e.totalAmount):"N/A"},{id:"area",header:"Delivery Area",cell:e=>e.area||"N/A"},..."on the way"===I||"delivered"===I?[{id:"assignee",header:"Assignee",cell:e=>e.assignee||"N/A"}]:[]],loadingText:"Loading resources",selectionType:"multi",trackBy:"id",variant:"borderless",empty:(0,j.jsx)(h.A,{margin:{vertical:"xs"},textAlign:"center",color:"inherit",children:(0,j.jsx)(o.A,{size:"m",children:(0,j.jsx)("b",{children:"No Orders"})})})})]})]})})}}}]);
//# sourceMappingURL=211.2a604324.chunk.js.map