"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[687],{6687:(e,i,t)=>{t.r(i),t.d(i,{default:()=>w});var l=t(5043),r=t(4712),a=t(7880),n=t(6255),s=t(2521),o=t(8003),d=t(5336),c=t(2671),h=t(5165),u=t(4154),p=t(9971),v=t(6421),x=t(8811),m=t(5416),j=t(500),A=t(3941),g=t(3003),f=t(5475),y=t(1013),S=(t(7179),t(6600)),b=t(2332),C=t(579);const P=e=>{var i;let{products:t}=e;const r=(0,g.wA)(),a=(0,g.d4)((e=>e.orders.ordersData)),{data:n=[]}=a;(0,l.useEffect)((()=>{r((0,b.Gb)())}),[r]);const[s,o]=(0,l.useState)([]),[d,c]=(0,l.useState)([]);return(0,l.useEffect)((()=>{if(t.data){const e=[],i=[];t.data.map((t=>(!0===t.active?e.push(t):!1===t.active&&i.push(t),null))),o(e),c(i)}}),[t]),(0,C.jsxs)(S.A,{columns:5,variant:"default",minColumnWidth:170,children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(v.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Total Active Products"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===s||void 0===s?void 0:s.length})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(v.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Total Stock"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:"\u20b9436K"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(v.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Total Orders"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===(i=n.items)||void 0===i?void 0:i.length})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(v.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Net Profit"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:"123K"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(v.A,{variant:"awsui-key-label",children:(0,C.jsx)("p",{style:{fontSize:12},children:"Inactive Products"})}),(0,C.jsx)("span",{style:{fontSize:36,fontWeight:"900",lineHeight:1.3,color:"#0972D3"},children:null===d||void 0===d?void 0:d.length})]})]})},w=()=>{const e=(0,g.wA)(),i=(0,g.d4)((e=>e.products.products)),{data:t=[]}=i,[S,b]=(0,l.useState)("All"),[w,k]=(0,l.useState)([]),[z,D]=(0,l.useState)(""),[F,L]=(0,l.useState)("All"),[O,T]=(0,l.useState)({}),[E,I]=(0,l.useState)(!1),[W,q]=(0,l.useState)(!1),[H,R]=(0,l.useState)({});(0,l.useEffect)((()=>{e((0,y.j0)())}),[e]);const V=(e,i,t)=>{var l,r;T((l=>({...l,[e]:{...l[e],[i]:t}})));const a=t,n="compareAt"===i?t:null!==(l=null===(r=O[e])||void 0===r?void 0:r.compareAt)&&void 0!==l?l:"";let s={};"onlineStorePrice"!==i||a||(s.onlineStorePrice="Required!"),"compareAt"===i&&(n?parseFloat(n)<parseFloat(a)&&(s.compareAt="CP must be greater than OSP"):s.compareAt="Required!"),R((i=>({...i,[e]:s})))},B=t?t.filter((e=>{const i="All"===S||e.active===("Active"===S),t=e.itemCode.toLowerCase().includes(z.toLowerCase())||e.name.toLowerCase().includes(z.toLowerCase())||(e.active?"active":"inactive").includes(z.toLowerCase()),l="All"===F||e.category===F;return i&&t&&l})):[],N=[{label:"All",value:"All"},{label:"Leafy",value:"Leafy"},{label:"Fruit",value:"Fruit"},{label:"Vegetable",value:"Vegetable"},{label:"Bengali Vegetable",value:"Bengali Vegetable"}],_=()=>{let e=!0;const i={};return w.forEach((t=>{const l=O[t.id]||{},r=void 0!==l.onlineStorePrice?l.onlineStorePrice:t.onlineStorePrice,a=void 0!==l.compareAt?l.compareAt:t.compareAt;let n={};""!==r&&void 0!==r||(e=!1,n.onlineStorePrice="Required!"),""===a||void 0===a?(e=!1,n.compareAt="Required!"):parseFloat(a)<parseFloat(r)&&(e=!1,n.compareAt="CP must be greater than OSP"),Object.keys(n).length>0&&(i[t.id]=n)})),R(i),e},[K,M]=l.useState([{type:"info",dismissible:!0,dismissLabel:"Dismiss message",onDismiss:()=>M([]),content:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("b",{children:"Price updated successfully! "}),(0,C.jsx)("p",{children:"The new price is now live on the online store"})]}),id:"message_1"}]);return(0,C.jsxs)(r.A,{notifications:(0,C.jsx)(C.Fragment,{children:W?(0,C.jsx)(a.A,{items:K}):(0,C.jsx)(C.Fragment,{})}),breadcrumbs:(0,C.jsx)(n.A,{items:[{text:"Dashboard",href:"/app/dashboard"},{text:"Products",href:"/app/dashboard/products"}],ariaLabel:"Breadcrumbs"}),headerVariant:"high-contrast",header:(0,C.jsx)(s.A,{actions:(0,C.jsx)(o.A,{alignItems:"center",direction:"horizontal",size:"xs",children:(0,C.jsx)(d.A,{variant:"normal",children:"Export"})}),variant:"h1",children:"Products"}),children:[(0,C.jsxs)(o.A,{direction:"vertical",size:"s",children:[(0,C.jsx)(c.A,{children:(0,C.jsx)(P,{products:i})}),(0,C.jsx)("div",{children:(0,C.jsx)(h.A,{header:(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,C.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,C.jsx)("div",{style:{width:"360px"},children:(0,C.jsx)(u.A,{filteringPlaceholder:"Search",filteringText:z,onChange:e=>{D(e.detail.filteringText)}})}),(0,C.jsx)("div",{style:{width:"120px"},children:(0,C.jsx)(p.A,{options:N,selectedOption:N.find((e=>e.value===F)),onChange:e=>{let{detail:i}=e;L(i.selectedOption.value)},placeholder:"Select Category"})})]}),(0,C.jsxs)("div",{style:{display:"flex",gap:"5px"},children:[W&&(0,C.jsx)(d.A,{variant:"normal",onClick:()=>{window.open("https://promodeagro.com/","_blank")},children:"View On Store"}),(0,C.jsx)(d.A,{disabled:0===w.length,variant:"normal",onClick:()=>{_()&&I(!0)},children:"Bulk Modify Price"})]})]}),variant:"borderless",columnDefinitions:[{id:"code",header:"Item Code",cell:e=>(0,C.jsx)(f.N_,{to:"/app/products/".concat(e.id),children:e.itemCode})},{id:"name",header:"Name",cell:e=>(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,C.jsx)("img",{src:null===e||void 0===e?void 0:e.images[0],alt:e.name,height:35,width:35,style:{borderRadius:"8px",marginRight:"10px"}}),(0,C.jsx)("p",{style:{width:"90px"},children:e.name})]})},{id:"category",header:"Category",cell:e=>(0,C.jsx)(v.A,{textAlign:"center",children:null===e||void 0===e?void 0:e.category})},{id:"stock",header:"On Hand Quantity",cell:e=>(0,C.jsxs)(v.A,{textAlign:"center",children:[null===e||void 0===e?void 0:e.stockQuantity,"/",null===e||void 0===e?void 0:e.units]})},{id:"alert",header:"Stock Alert",cell:e=>(0,C.jsx)("p",{style:{color:"#0972D3",textAlign:"center"},children:"Active"})},{id:"onlineStorePrice",header:"Online Price",cell:e=>{var i,t,l;return(0,C.jsx)("div",{style:{width:"80px"},children:(0,C.jsx)(x.A,{errorText:null===(i=H[e.id])||void 0===i?void 0:i.onlineStorePrice,children:(0,C.jsx)(m.A,{disabled:!w.some((i=>i.id===e.id)),placeholder:"Enter Price",type:"number",value:null!==(t=null===(l=O[e.id])||void 0===l?void 0:l.onlineStorePrice)&&void 0!==t?t:e.onlineStorePrice,onChange:i=>V(e.id,"onlineStorePrice",i.detail.value),ariaLabel:"online store price"})})})}},{id:"compareAt",header:"Compare Price",cell:e=>{var i,t,l;return(0,C.jsx)("div",{style:{width:"80px"},children:(0,C.jsx)(x.A,{errorText:null===(i=H[e.id])||void 0===i?void 0:i.compareAt,children:(0,C.jsx)(m.A,{placeholder:"Enter Price",type:"number",value:null!==(t=null===(l=O[e.id])||void 0===l?void 0:l.compareAt)&&void 0!==t?t:e.compareAt,onChange:i=>V(e.id,"compareAt",i.detail.value),ariaLabel:"compare at price",disabled:!w.some((i=>i.id===e.id))})})})}},{id:"status",header:"Status",cell:i=>(0,C.jsx)("div",{style:{width:"90px"},children:(0,C.jsx)(j.A,{onChange:()=>(i=>{const t=!i.active;e((0,y.WJ)({id:i.id,active:t})).then((i=>{"fulfilled"===i.meta.requestStatus&&i.payload.status,e((0,y.j0)())}))})(i),checked:i.active,children:(0,C.jsx)("p",{children:i.active?"Active":"Inactive"})})})}],selectedItems:w,onSelectionChange:e=>{let{detail:i}=e;k(i.selectedItems)},items:B,selectionType:"multi"})})]}),(0,C.jsx)(A.A,{visible:E,onDismiss:()=>I(!1),header:"Confirm Bulk Modify",footer:(0,C.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,C.jsx)(d.A,{variant:"link",onClick:()=>I(!1),children:"Cancel"}),(0,C.jsx)(d.A,{variant:"primary",onClick:async()=>{let i=!0;const t=w.map((e=>{var i,t;return{id:e.id,compareAt:parseFloat((null===(i=O[e.id])||void 0===i?void 0:i.compareAt)||e.compareAt),onlineStorePrice:parseFloat((null===(t=O[e.id])||void 0===t?void 0:t.onlineStorePrice)||e.onlineStorePrice)}}));console.log(t,"products.js");try{const l=await e((0,y.OS)(t));"fulfilled"===l.meta.requestStatus&&200===l.payload.status&&(q(!0),k([]),I(!1),i=!1)}catch(l){console.error("Failed to update product pricing:",l),i=!1}i&&(q(!0),k([])),I(!1)},children:"Confirm"})]}),children:"Are you sure you want to bulk modify the prices for the selected items?"})]})}}}]);
//# sourceMappingURL=687.947831a2.chunk.js.map