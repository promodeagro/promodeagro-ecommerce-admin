"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[129],{1093:(e,t,a)=>{a.d(t,{A:()=>v});var s=a(5043),l=a(1985),r=a(8454),i=a(8205),n=a(4484),o=a(6799),d=a(3679),c=a(6446),h=a(2792),u=a(579);function p(){const e=(0,i.h)(),t=(0,n.N)(e,o.$i),a=(0,n.N)(e,o.O);return(0,u.jsx)(l.A,{className:"table-pagination",color:"primary",variant:"outlined",shape:"rounded",page:t+1,count:a,renderItem:e=>(0,u.jsx)(r.A,{...e,disableRipple:!0}),onChange:(t,a)=>e.current.setPage(a-1),hidePrevButton:!a,hideNextButton:!a})}class m extends s.Component{constructor(e){super(e)}render(){const{paginationDetails:e={pageSize:10,page:0},pagSize:t=5,data:a,columns:s,checkboxSelection:l=!0}=this.props.details;return(0,u.jsx)(c.A,{className:"common-table-container",children:(0,u.jsx)(d.z,{checkboxSelection:l,disableRowSelectionOnClick:!0,disableColumnMenu:!0,paginationModel:e,onPaginationModelChange:e=>{try{this.props.handlePageChange(e)}catch(t){console.error(t)}},pageSizeOptions:[t],slots:{pagination:p,noRowsOverlay:()=>h.ui},rows:a,columnHeaderHeight:44,columns:s.map((e=>({...e,sortable:!1,resizable:!1})))})})}}const v=m},3610:(e,t,a)=>{a.d(t,{A:()=>b});var s=a(5043),l=a(6446),r=a(8911),i=a(1906),n=a(9578),o=a(3156),d=a(2505),c=a(6060),h=a(4605),u=a(3217),p=a(2143),m=a(9648),v=a(1313),g=a(579);(0,c.A)("div")((e=>{let{theme:t}=e;return"\n  width: max-content;\n  padding: 12px 16px;\n  margin: 8px;\n  border-radius: 8px;\n  border: 1px solid ".concat("dark"===t.palette.mode?x[700]:x[200],";\n  background-color: ").concat("dark"===t.palette.mode?x[900]:"#fff",";\n  box-shadow: ").concat("dark"===t.palette.mode?"0px 4px 8px rgb(0 0 0 / 0.7)":"0px 4px 8px rgb(0 0 0 / 0.1)",";\n  font-family: 'IBM Plex Sans', sans-serif;\n  font-weight: 500;\n  font-size: 0.875rem;\n  z-index: 1;\n")}));const x={50:"#F3F6F9",100:"#E5EAF2",200:"#DAE2ED",300:"#C7D0DD",400:"#B0B8C4",500:"#9DA8B7",600:"#6B7A90",700:"#434D5B",800:"#303740",900:"#1C2025"};class C extends s.Component{constructor(e){var t;super(e),t=this,this.filterPopupToggle=e=>{try{let{beforeApplyFilters:l}=this.state;if(!e){var t,a,s;let e=null===(t=this.props.details)||void 0===t||null===(a=t.filter)||void 0===a||null===(s=a.selectedFilters)||void 0===s?void 0:s.filter((e=>!l.includes(e)));this.props.handleFilters(null,e)}this.setState({anchor:e,beforeApplyFilters:[]})}catch(l){console.error(l)}},this.renderFilterListItem=()=>{var e;let{filter:t}=this.props.details;if(null!==t&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&e.length)return t.data.map(((e,a)=>{var s,l;return(0,g.jsx)(p.A,{children:(0,g.jsx)(h.A,{control:(0,g.jsx)(u.A,{size:"small",sx:{p:.5},id:e.label,checked:t.selectedFilters.includes(null===(s=e.label)||void 0===s||null===(l=s.toLowerCase())||void 0===l?void 0:l.replace(" ","_")),onClick:a=>{var s,l,r,i;let{beforeApplyFilters:n}=this.state,o=null===(s=e.label)||void 0===s||null===(l=s.toLowerCase())||void 0===l?void 0:l.replace(" ","_");a.target.checked?"all"===o?n=t.data.map((e=>{var t,a;return null===(t=e.label)||void 0===t||null===(a=t.toLowerCase())||void 0===a?void 0:a.replace(" ","_")})):n.push(o):n.filter((e=>e!==o)),this.props.handleFilters(null===(r=e.label)||void 0===r||null===(i=r.toLowerCase())||void 0===i?void 0:i.replace(" ","_")),this.setState({beforeApplyFilters:n})}}),label:e.label})},"item-".concat(a))}))},this.onClickFilters=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{let{filter:a}=t.props.details;a.selectedFilters&&(t.filterPopupToggle(),t.props.applyOrCancelFilter(e))}catch(a){console.error(a)}},this.state={anchor:null,beforeApplyFilters:[]}}render(){var e,t;let{header:a,exportCsv:s,btnLabel:c,searchData:h,dataLength:u,dataRange:p,filter:x,importCsv:C,isOnlySearchVisible:b}=this.props.details;const{anchor:f}=this.state;return(0,g.jsxs)(l.A,{className:"list-heading d-flex align-items-center justify-content-between",children:[(0,g.jsxs)(l.A,{className:"d-block",children:[(0,g.jsx)("h2",{children:a}),(0,g.jsxs)("p",{children:["Showing ",p," of ",(0,g.jsx)("strong",{children:u})," "]})]}),(0,g.jsxs)(r.A,{direction:"row",spacing:1.5,children:[(0,g.jsxs)(l.A,{className:"top-search",children:[(0,g.jsx)("input",{type:"text",className:"form-control",placeholder:"Search",value:h,onChange:e=>{try{this.props.handleSearch(e.target.value)}catch(e){console.error(e)}}}),(0,g.jsx)("button",{className:"button",children:(0,g.jsx)(n.A,{})})]}),b?(0,g.jsx)(g.Fragment,{}):(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(l.A,{children:[(0,g.jsx)(i.A,{className:"btn-outline-secondary",type:"button",onClick:e=>this.filterPopupToggle(e.currentTarget),children:(null===x||void 0===x?void 0:x.label)||"Filters "}),null!==x&&void 0!==x&&null!==(e=x.data)&&void 0!==e&&e.length?(0,g.jsxs)(m.A,{className:"filter-popup-content",id:"basic-menu",anchorEl:this.state.anchor,open:f,onClose:()=>this.filterPopupToggle(null),MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,g.jsxs)("h4",{children:[null===x||void 0===x?void 0:x.header," "]}),this.renderFilterListItem(),(0,g.jsxs)(l.A,{className:"d-flex align-items-center justify-content-between",children:[(0,g.jsx)(i.A,{className:"cancel-btn",size:"small",onClick:()=>this.onClickFilters(0),children:"Cancel"}),(0,g.jsx)(i.A,{className:"apply-btn",size:"medium",onClick:()=>this.onClickFilters(1),children:"Apply filters"})]})]}):(0,g.jsx)(g.Fragment,{})]})}),C?(0,g.jsx)(i.A,{className:"btn-outline-secondary",variant:"outlined",startIcon:(0,g.jsx)(v.A,{}),children:C}):(0,g.jsx)(g.Fragment,{}),s?(0,g.jsx)(i.A,{className:"btn-outline-secondary",variant:"outlined",startIcon:(0,g.jsx)(o.A,{}),children:s}):(0,g.jsx)(g.Fragment,{}),c?(0,g.jsx)(i.A,{className:"primary-btn ",variant:"contained",startIcon:(0,g.jsx)(d.A,{}),children:c}):(0,g.jsx)(g.Fragment,{}),null!==(t=this.props.details)&&void 0!==t&&t.btnLabel2?(0,g.jsx)(i.A,{className:"primary-btn ",variant:"contained",startIcon:(0,g.jsx)(d.A,{}),children:this.props.details.btnLabel2}):(0,g.jsx)(g.Fragment,{})]})]})}}const b=C},3129:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var s=a(5043),l=a(7739),r=a(1906),i=a(7392),n=a(6446),o=a(9869),d=a(4056),c=a(3003),h=a(5719),u=a(5067),p=a(1093),m=a(5475),v=a(3610),g=a(2792),x=a(8584),C=a(3471),b=a(3159),f=a(4914),j=a(579);const A=[{field:"order_id",headerName:"Order Id",width:180,renderCell:e=>(0,j.jsx)(m.N_,{to:e.value,children:e.value})},{field:"order_date",headerName:"Order Date",width:150,renderCell:e=>e.value},{field:"vendor_name",headerName:"Vendor Name",width:180,renderCell:e=>e.value},{field:"no_of_ingredients",headerName:"No. of Ingredients",width:200,renderCell:e=>e.value},{field:"total_cost",headerName:"Total Cost",width:130,renderCell:e=>e.value},{field:"delivery_date",headerName:"Delivery Date",width:180,renderCell:e=>e.value},{field:"status",headerName:"Status",width:150,renderCell:function(e){return(0,j.jsx)("div",{children:e.value})}}],w=[{field:"purchase_order_no",headerName:"Purchase Order No.",width:150,renderCell:e=>(0,j.jsx)(m.N_,{to:e.value,children:e.value})},{field:"order_date",headerName:"Purchase Order Date",width:150,renderCell:e=>e.value},{field:"vendor_name",headerName:"Vendor Name",width:180,renderCell:e=>e.value},{field:"vendor_email",headerName:"Vendor Email",width:300,renderCell:e=>(0,j.jsxs)("div",{className:"d-flex align-items-center",children:[(0,j.jsx)(l.A,{title:e.value,children:(0,j.jsx)("div",{className:"email",children:e.value})}),(0,j.jsx)(f.A,{className:"copy-icon"})," "]})},{field:"requestor_name",headerName:"Requestor",description:"This column has a value getter and is not sortable.",width:130,renderCell:e=>e.value},{field:"status",headerName:"Status",width:150,renderCell:function(e){return(0,j.jsx)("div",{className:"status ".concat(g.yD[e.row.statusClass]),children:e.value})}},{field:"actions",headerName:"Actions",width:300,renderCell:e=>e.value,renderCell:()=>(0,j.jsxs)("div",{className:"table-btns",children:[(0,j.jsx)(r.A,{className:"primary create-order-btn",variant:"primary",children:"Create Order"}),(0,j.jsx)(i.A,{"aria-label":"more",id:"long-button","aria-haspopup":"true",children:(0,j.jsx)(C.A,{})}),(0,j.jsx)(i.A,{"aria-label":"more",id:"long-button","aria-haspopup":"true",children:(0,j.jsx)(b.A,{})})]})}];let{APPROVED:N,UNDER_REVIEW:S,REJECTED:D,PENDING:L,DELETED:_}=g.ac;const F=[{label:"All"},{label:N},{label:S},{label:D},{label:L},{label:_}];class y extends s.Component{constructor(e){super(e),this.componentDidMount=()=>{this.props.fetchPurchaseOrder(),this.props.fetchPurchaseOrderRequisitions()},this.handleChange=(e,t)=>{t!==this.state.value&&this.setState({value:t})},this.state={purchaseData:[],paginationDetails:{pageSize:10,page:0},selectedFilters:[],value:0,requisitionsData:[]}}componentDidUpdate(e,t){var a,s,l,r;e.purchaseorderlist.status!==this.props.purchaseorderlist.status&&this.props.purchaseorderlist.status===h.A.SUCCESS&&null!==(a=this.props.purchaseorderlist)&&void 0!==a&&a.data&&this.manipulationData((null===(l=this.props.purchaseorderlist)||void 0===l?void 0:l.data.purchase_order_list)||[]);e.purchaserequisitions.status!==this.props.purchaserequisitions.status&&this.props.purchaserequisitions.status===h.A.SUCCESS&&null!==(s=this.props.purchaserequisitions)&&void 0!==s&&s.data&&this.manipulationRequitionData((null===(r=this.props.purchaserequisitions)||void 0===r?void 0:r.data.purchase_requition_list)||[])}manipulationData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{purchaseData:a,selectedFilters:s}=this.state;if(a=[],null!==e&&void 0!==e&&e.length){let s=JSON.parse(JSON.stringify(e));t&&(s=e.filter((e=>null!==e&&void 0!==e&&e.order_id.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.order_date.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.vendor_name.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.no_of_ingredients.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.total_cost.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.delivery_date.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.status.toLowerCase().includes(t.toLowerCase())?e:null))),s.forEach((e=>{a.push({...e})})),console.log(a)}this.setState({purchaseData:a})}manipulationRequitionData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",{requisitionsData:a,selectedFilters:s}=this.state;if(a=[],null!==e&&void 0!==e&&e.length){let s=JSON.parse(JSON.stringify(e));t&&(s=e.filter((e=>null!==e&&void 0!==e&&e.purchase_order_no.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.order_date.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.vendor_name.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.vendor_email.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.requestor_name.toLowerCase().includes(t.toLowerCase())||null!==e&&void 0!==e&&e.status.toLowerCase().includes(t.toLowerCase())?e:null))),s.forEach(((e,t)=>{a.push({...e,id:t+1})})),console.log(a)}this.setState({requisitionsData:a})}render(){const{purchaseData:e,paginationDetails:{page:t,pageSize:a},searchData:s,selectedFilters:l,value:r,requisitionsData:i}=this.state,c=t*a+1,m=t*a+a;return(0,j.jsx)(n.A,{className:"main-container",children:(0,j.jsxs)(n.A,{className:"purchase-order-container",children:[(0,j.jsx)(v.A,{details:{header:0===r?"All Purchase Orders":"Purchase Requisitions List",exportCsv:"",btnLabel:1===r?"Create Order":"",dataLength:e.length,searchData:s,isOnlySearchVisible:!0,dataRange:e.length?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("strong",{children:[c," -",m]})}):0,filter:{label:"Filters",data:F,header:"Status",selectedFilters:l}},handleSearch:e=>{var t,a;0===r?this.manipulationData((null===(t=this.props.purchaseorderlist)||void 0===t?void 0:t.data.purchase_order_list)||[],e):this.manipulationRequitionData((null===(a=this.props.purchaserequisitions)||void 0===a?void 0:a.data.purchase_requition_list)||[],e)},handleFilters:(e,t)=>{let{selectedFilters:a}=this.state;t?a=t:a.includes(e)?a="all"===e?[]:a.filter((t=>![e,"all"].includes(t))):"all"===e?a=F.map((e=>e.label.toLowerCase().replace(" ","_"))):a.push(e),console.log(a,t),this.setState({selectedFilters:a})},applyOrCancelFilter:e=>{var t;this.manipulationData((null===(t=this.props.requisitionslist)||void 0===t?void 0:t.data.requisitionslist)||[],s,e?1:0)}}),(0,j.jsxs)(n.A,{className:"purchase-order-tab-container",children:[(0,j.jsxs)(o.A,{value:r,onChange:this.handleChange,"aria-label":"basic tabs example",children:[(0,j.jsx)(d.A,{label:"Purchase Orders"}),(0,j.jsx)(d.A,{label:"Purchase Requisitions"})]}),0===r&&(0,j.jsx)(n.A,{children:this.props.purchaseorderlist.status===h.A.IN_PROGRESS?u.aH.commonLoader():(0,j.jsx)(p.A,{details:{paginationDetails:{page:t,pageSize:a},pagSize:10,data:e,columns:A,checkboxSelection:!1},handlePageChange:e=>{this.setState({paginationDetails:e})}})}),1===r&&(0,j.jsx)(n.A,{children:this.props.purchaserequisitions.status===h.A.IN_PROGRESS?u.aH.commonLoader():(0,j.jsx)(p.A,{details:{paginationDetails:{page:t,pageSize:a},pagSize:10,data:i,columns:w,checkboxSelection:!1},handlePageChange:e=>{this.setState({paginationDetails:e})}})})]})]})})}}const q={fetchPurchaseOrder:x.c,fetchPurchaseOrderRequisitions:x.t},O=(0,c.Ng)((function(e){const{purchaseorderlist:t,purchaserequisitions:a}=e.purchaseorders;return{purchaseorderlist:t,purchaserequisitions:a}}),q)(y)}}]);
//# sourceMappingURL=129.108c4cf8.chunk.js.map