"use strict";(self.webpackChunkrasilabs=self.webpackChunkrasilabs||[]).push([[211],{7211:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var s=r(5043),i=r(3003),l=r(2332),a=r(4712),n=r(6255),d=r(2521),o=r(8003),c=r(2671),u=r(6600),h=r(6421),m=r(7468),v=r(4154),x=r(9971),f=r(5336),g=r(3372),y=r(5165),A=r(5475),p=r(3941),j=r(579);const b=()=>{var e,t,r,b,O;const w=(0,i.wA)(),S=(0,i.d4)((e=>e.orders.ordersData)),C=(0,i.d4)((e=>e.orders.order_status)),D=(null===S||void 0===S?void 0:S.data)||{},k=s.useMemo((()=>D.items||[]),[D.items]),[N,E]=(0,s.useState)([]),[z,I]=(0,s.useState)(1),[W,B]=(0,s.useState)("Order Confirmed"),[P,G]=(0,s.useState)(""),[T,L]=(0,s.useState)(null),[M,H]=(0,s.useState)(!1),[J,_]=(0,s.useState)(!1),[F,K]=(0,s.useState)(!1),[R,V]=(0,s.useState)([]),[q,Q]=(0,s.useState)(!1),[U,X]=s.useState();(0,s.useEffect)((()=>{w((0,l.Gb)({search:P,status:W}))}),[w,P,W]),(0,s.useEffect)((()=>{w((0,l.rA)())}),[w]),(0,s.useEffect)((()=>{(()=>{let e=k;W&&(e=k.filter((e=>e.orderStatus===W))),V((t=>JSON.stringify(t)!==JSON.stringify(e)?e:t))})()}),[W,k]),(0,s.useEffect)((()=>{"delivered"!==W||U||X({label:"7 Days Old",value:"1"})}),[W,U]);const Y=[{label:"Order Confirmed",value:"Order Confirmed"},{label:"Packed",value:"packed"},{label:"On The Way",value:"on the way"},{label:"Delivered",value:"delivered"}],Z=()=>{_(!1)},$=()=>{H(!1)},ee=()=>{K(!1)};return(0,j.jsx)(a.A,{headerVariant:"high-contrast",breadcrumbs:(0,j.jsx)(n.A,{items:[{text:"Dashboard",href:"/app/Dashboard"},{text:"Orders",href:"#"}],ariaLabel:"Breadcrumbs"}),header:(0,j.jsx)(d.A,{variant:"h1",children:"Orders"}),children:(0,j.jsxs)(o.A,{direction:"vertical",size:"xl",children:[(0,j.jsx)(c.A,{className:"top-container",style:{marginBottom:"1rem"},children:(0,j.jsxs)(u.A,{columns:5,variant:"default",minColumnWidth:170,children:[(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Total Orders"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:(null===C||void 0===C||null===(e=C.data)||void 0===e?void 0:e.totalOrderCount)||"N/A"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Completed"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===C||void 0===C||null===(t=C.data)||void 0===t?void 0:t.completedOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Confirmed"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===C||void 0===C||null===(r=C.data)||void 0===r?void 0:r.confirmedOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Cancelled"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===C||void 0===C||null===(b=C.data)||void 0===b?void 0:b.cancelledOrderCount})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)(h.A,{variant:"awsui-key-label",children:(0,j.jsx)("p",{style:{fontSize:12,fontWeight:"bold"},children:"Orders Refunded"})}),(0,j.jsx)("span",{style:{fontSize:34,fontWeight:"900",lineHeight:1.3,color:"#1D4ED8"},children:null===C||void 0===C||null===(O=C.data)||void 0===O?void 0:O.refundedOrderCount})]})]})}),(0,j.jsxs)(o.A,{direction:"vertical",size:"s",children:[(0,j.jsx)(h.A,{children:(0,j.jsxs)(m.A,{disableGutters:!0,gridDefinition:[{colspan:{default:12,xxs:6}},{colspan:{default:12,xxs:6}}],children:[(0,j.jsxs)("div",{style:{display:"flex",gap:"0.4rem"},children:[(0,j.jsx)(v.A,{filteringPlaceholder:"Search",filteringText:P,onChange:e=>{G(e.detail.filteringText),I(1)}}),(0,j.jsx)(x.A,{options:Y,selectedOption:Y.find((e=>e.value===W))?{label:"Order Confirmed"===W?"Sort By Status":"packed"===W?"Sort By Pack":"on the way"===W?"Sort By On The Way":"delivered"===W?"Sort By Delivered":"Sort By Status",value:W}:null,onChange:async e=>{let{detail:t}=e;const r=t.selectedOption.value;B(r),E([]),I(1),await w((0,l.Gb)({search:P,status:r}))}}),"delivered"===W&&(0,j.jsx)(x.A,{selectedOption:U,onChange:e=>{let{detail:t}=e;return X(t.selectedOption)},options:[{label:"7 Days Old",value:"1"},{label:"14 Days Old",value:"2"},{label:"1 Month Old",value:"3"},{label:"2 Month Old",value:"4"},{label:"Old Orders",value:"5"}],placeholder:"Completed Order"})]}),(0,j.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:["Order Confirmed"===W&&(0,j.jsx)(f.A,{disabled:0===N.length,onClick:()=>{_(!0)},children:"Move to Packed"}),"packed"===W&&(0,j.jsx)(f.A,{disabled:0===N.length,onClick:()=>{H(!0)},children:"Assign Orders"}),"on the way"===W&&(0,j.jsx)(f.A,{disabled:0===N.length,onClick:()=>{K(!0)},children:"Move to Delivered"}),(0,j.jsx)(g.A,{currentPageIndex:z,onChange:e=>{let{detail:t}=e;return(async e=>{I(e),await w((0,l.Gb)({search:P,status:W}))})(t.currentPageIndex)},openEnd:!0,pagesCount:5})]})]})}),(0,j.jsx)(p.A,{onDismiss:Z,visible:J,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(f.A,{variant:"link",onClick:Z,children:"Cancel"}),(0,j.jsx)(f.A,{variant:"primary",onClick:async()=>{try{if(!Array.isArray(N)||0===N.length)throw new Error("No items selected or invalid selection.");const e=N.map((e=>e.id)),t=await w((0,l.Kv)({ids:e,status:"Packed"})).unwrap();if("success"!==t.message)throw new Error("Failed to update order status");console.log("Order status updated successfully:",t),await w((0,l.Gb)()),window.location.reload(),_(!1)}catch(e){console.error("Error updating order status:",e)}},children:"Confirm"})]})}),header:"Move to Packed Orders",children:"Are you sure you want to move the selected orders to the 'Packed Orders' stage?"}),(0,j.jsxs)(p.A,{onDismiss:$,visible:M,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(f.A,{variant:"link",onClick:$,children:"Cancel"}),(0,j.jsx)(f.A,{variant:"primary",onClick:async()=>{try{if(!T)return void Q(!0);if(Q(!1),!Array.isArray(N)||0===N.length)throw new Error("No items selected or invalid selection.");const e=N.map((e=>e.id)),t=T.value;if(!Array.isArray(e)||0===e.length)throw new Error("Invalid order IDs.");const r=await w((0,l.aC)({orderIds:e,assignee:t,status:"On The Way"})).unwrap();if("success"!==r.message)throw new Error("Failed to assign delivery boy and update order status");console.log("Orders assigned and status updated successfully:",r),await w((0,l.Gb)()),window.location.reload(),H(!1)}catch(e){console.error("Error assigning delivery boy and updating order status:",e)}},children:"Assign"})]})}),header:"Assign Orders",children:[(0,j.jsx)("h3",{style:{marginBottom:"0.5em"},children:"Select Assignee"}),(0,j.jsx)(x.A,{options:[{label:"sohail",value:"sohail"},{label:"Jane Smith",value:"jane_smith"},{label:"Alice Johnson",value:"alice_johnson"}],selectedOption:T,onChange:e=>{let{detail:t}=e;L(t.selectedOption)},placeholder:"Select Assignee",invalid:q&&!T})]}),(0,j.jsx)(p.A,{onDismiss:ee,visible:F,footer:(0,j.jsx)(h.A,{float:"right",children:(0,j.jsxs)(o.A,{direction:"horizontal",size:"xs",children:[(0,j.jsx)(f.A,{variant:"link",onClick:ee,children:"Cancel"}),(0,j.jsx)(f.A,{variant:"primary",onClick:async()=>{try{if(!Array.isArray(N)||0===N.length)throw new Error("No items selected or invalid selection.");const e=N.map((e=>e.id)),t=await w((0,l.Kv)({ids:e,status:"Delivered"})).unwrap();if("success"!==t.message)throw new Error("Failed to update order status");console.log("Order status updated to delivered successfully:",t),await w((0,l.Gb)()),window.location.reload(),K(!1)}catch(e){console.error("Error updating order status:",e)}},children:"Confirm"})]})}),header:"Move to Delivered",children:"Are you sure you want to move the selected orders to the Delivered Orders stage?"}),(0,j.jsx)(y.A,{renderAriaLive:e=>{let{firstIndex:t,lastIndex:r,totalItemsCount:s}=e;return"Displaying items ".concat(t+1," to ").concat(r," of ").concat(s)},onSelectionChange:e=>{let{detail:t}=e;return E(t.selectedItems)},selectedItems:N,ariaLabels:{selectionGroupLabel:"Items selection",allItemsSelectionLabel:e=>{let{selectedItems:t}=e;return"".concat(t.length," ").concat(1===t.length?"item":"items"," selected")},itemSelectionLabel:(e,t)=>{let{selectedItems:r}=e;return t.name}},items:R,columnDefinitions:[{id:"id",header:"Order ID",cell:e=>e.id?(0,j.jsxs)(A.N_,{to:"/app/order/orderdetail/".concat(e.id),children:["#",e.id]}):"N/A"},{id:"orderDate",header:"Order Date",cell:e=>{if(!e.orderDate)return"N/A";return new Date(e.orderDate).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-")}},{id:"customerName",header:"Customer Name",cell:e=>e.customerName&&e.customerName&&e.customerName?e.customerName:"N/A"},{id:"item",header:"Item",cell:e=>{if(e.items){const t=e.items;return"".concat(t,1===t?" Item":" Items")}return"N/A"}},{id:"paymentStatus",header:"Payment Status",cell:e=>e.paymentStatus||"N/A"},{id:"orderStatus",header:"Order Status",cell:e=>e.orderStatus||"N/A"},{id:"totalAmount",header:"Total Amount",cell:e=>e.totalAmount?"Rs. ".concat(e.totalAmount):"N/A"},{id:"area",header:"Delivery Area",cell:e=>e.area||"N/A"},..."on the way"===W||"delivered"===W?[{id:"assignee",header:"Assignee",cell:e=>e.assignee||"N/A"}]:[]],loadingText:"Loading resources",selectionType:"multi",trackBy:"id",variant:"borderless",empty:(0,j.jsx)(h.A,{margin:{vertical:"xs"},textAlign:"center",color:"inherit",children:(0,j.jsx)(o.A,{size:"m",children:(0,j.jsx)("b",{children:"No Orders"})})})})]})]})})}}}]);
//# sourceMappingURL=211.a0977ed0.chunk.js.map